(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{5016:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>D});var r=l(5155),t=l(2115),s=l(1699),n=l(7168),i=l(5695),o=l(5392),d=l(5318);function c(e){let{files:a,setFiles:l}=e,[s,n]=(0,t.useState)();return(0,r.jsxs)("div",{className:"bg-white p-3 flex gap-2 flex-col h-full w-full rounded",children:[(0,r.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,r.jsx)("input",{className:"rounded",type:"file",multiple:!0,accept:"*.pdf",onInput:e=>{if(e.currentTarget.files){if(!a)return void l(Array.from(e.currentTarget.files));l([...a,...Array.from(e.currentTarget.files)])}}})}),(0,r.jsx)("div",{className:"h-full flex flex-col rounded gap-2 overflow-y-auto",children:a&&Array.from(a).map((e,t)=>(0,r.jsxs)("div",{className:"bg-grey border-2 border-solid rounded p-1 flex flex-row gap-2",draggable:!0,onDragStart:a=>{n(e),a.dataTransfer.setData("text/plain","")},onDragEnd:()=>{n(void 0)},onDragOver:e=>e.preventDefault(),onDrop:()=>{if(!s)return;let r=a.indexOf(s),t=a.indexOf(e);-1!=r&&-1!=t&&(a.splice(r,1),a.splice(t,0,s),l(a))},children:[(0,r.jsx)("div",{children:t+1}),(0,r.jsx)(d.A,{color:"#f70202",onClick:()=>{let r=a.indexOf(e),t=[...a];console.log(r),-1!=r&&(t.splice(r,1),l(t))}}),e.name]},e.name+t))})]})}var f=l(4123);async function u(e,a,l){if(!e.length)throw Error("No files found");let r=0,t=100/(e.length+2),s=()=>{100!=r&&l(r+=t)};l(r);let n=await f.PDFDocument.create();for(let a of(s(),e)){let e=await a.arrayBuffer(),l=await f.PDFDocument.load(e);(await n.copyPages(l,l.getPageIndices())).forEach(e=>n.addPage(e)),s()}let i=await n.save();return s(),new Blob([i],{type:"application/pdf"})}var p=l(2714),m=l(9852);function x(e){let{file:a,extension:l,placeholderFilename:s}=e,[i,o]=(0,t.useState)(s);return a?(0,r.jsxs)("div",{className:"bg-white flex flex-col p-3 rounded gap-2 items-center w-full",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,r.jsx)(p.J,{children:"Filename: "}),(0,r.jsx)(m.p,{className:"border-2 border-solid rounded",type:"text",value:i,onChange:e=>o(e.target.value)}),"."+l]}),(0,r.jsx)(n.$,{className:"grow-0 max-w-24",onClick:()=>{if(!a)return;let e=URL.createObjectURL(a),r=document.createElement("a");r.href=e,r.download=i+"."+l,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)},children:"Download"})]}):(0,r.jsx)("div",{})}var g=l(5312),h=l(3999);let w=t.forwardRef((e,a)=>{let{className:l,value:t,...s}=e;return(0,r.jsx)(g.bL,{ref:a,className:(0,h.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...s,children:(0,r.jsx)(g.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});w.displayName=g.bL.displayName;var v=l(172),j=l(3824),y=l(9311),N=l.n(y);async function b(e){return new Promise((a,l)=>{let r=new FileReader;r.onload=async e=>{try{var r;let l=null==(r=e.target)?void 0:r.result;if(!l)return;let t=await (0,j.YE)({data:l}).promise,s=[];for(let e=1;e<=t.numPages;e++){let a=await t.getPage(e),l=a.getViewport({scale:1}),r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return;r.width=l.width,r.height=l.height,await a.render({canvasContext:n,viewport:l}).promise;let i=r.toDataURL("image/png");s.push(i)}a(s)}catch(e){l(e)}},r.onerror=l,r.readAsArrayBuffer(e)})}j.EA.workerSrc="/pdf.worker.min.mjs";let P=new Map([["merge",{title:"Merges multiple uploaded PDFs into a Singular PDF file",description:"Upload multiple PDF files and download a merged PDF file with all pages in the order of the files.",func:u,extension:"pdf",placeholderFilename:"merged"}],["toPNG",{title:"Converts PDF Pages to .PNG images",description:"Upload multiple (or single) PDF file and download all the pages of PDF(s) as .PNG images.\n\nDownloads as a .zip folder.",func:async function(e,a,l){let r=[];l(0);let t=50/e.length,s=0,n=e=>{100!=s&&l(s+=e)};for(let a of e)r.push(...await b(a)),n(t);let i=new(N());t=50/(r.length+1),r.forEach((e,a)=>{let l=e.split(",")[1];i.file("page".concat(a+1,".png"),l,{base64:!0}),n(t)});let o=await i.generateAsync({type:"blob"});return n(t),o},extension:"zip",placeholderFilename:"broken"}]]);function D(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(F,{})})}function F(){let[e,a]=(0,t.useState)([]),[l,n]=(0,t.useState)(),[d,f]=(0,t.useState)(""),[u,p]=(0,t.useState)({}),[m,g]=(0,t.useState)(!1),[h,w]=(0,t.useState)(-1),v=(0,i.useSearchParams)().get("cfn");if(null==v)return(0,r.jsx)("div",{children:"No converter found"});let j=P.get(v);return void 0===j?(0,r.jsx)("div",{children:"No converter found"}):(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full max-md:p-5 pr-5 h-3/4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 w-full",children:[(0,r.jsx)(s.A,{title:j.title,description:j.description,params:u,setParams:p,enabledOptions:j.enabledOptions}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 w-full md:w-3/4 items-center",children:[(0,r.jsx)("div",{className:"flex h-1/2 w-full justify-center",children:(0,r.jsx)(c,{files:e,setFiles:a})}),(0,r.jsx)("div",{className:"flex max-h-1/4 justify-center gap-20 w-full",children:(0,r.jsx)(k,{files:e,params:u,processor:j.func,setProcessedFile:n,setError:f,reload:m,setReload:g,progress:h,setProgress:w})}),(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)(x,{file:l,extension:j.extension,placeholderFilename:j.placeholderFilename})})]})]}),(0,r.jsx)(o.A,{error:d},m?"1":"0")]})}let k=e=>{let{files:a,params:l,processor:s,setProcessedFile:i,setError:o,reload:d,setReload:c,progress:f,setProgress:u}=e,[p,m]=(0,t.useState)(!1),x=async()=>{try{m(!0);let e=await s(a,l,u);m(!1),i(e),o("")}catch(e){e instanceof Error?o(e.message):o("An unknown error occurred")}c(!d)};return(0,r.jsxs)("div",{className:"flex grow flex-col items-center gap-3",children:[p&&(0,r.jsxs)(n.$,{className:"grow-0 max-w-24",variant:"secondary",disabled:!0,children:[(0,r.jsx)(v.A,{className:"animate-spin"}),"Please wait"]}),!p&&(0,r.jsx)(n.$,{className:"grow-0 max-w-24",variant:"secondary",onClick:x,children:"Process"}),(0,r.jsx)(S,{value:f})]})},S=e=>{let{value:a}=e;return -1==a?(0,r.jsx)("div",{}):(0,r.jsx)(w,{value:a,"data-state":"loading"})}},6155:(e,a,l)=>{Promise.resolve().then(l.bind(l,5016))}},e=>{var a=a=>e(e.s=a);e.O(0,[84,650,868,950,939,441,684,358],()=>a(6155)),_N_E=e.O()}]);